name: Manual Install Test

on:
  workflow_dispatch

jobs:
  install:
    runs-on: ubuntu-latest
    steps:
    - name: Install Simple
      run: > 
        curl -o- https://simplescripts.dev/api/install | 
        SIMPLE_PATH=~/.simple sh 
        
    - name: Create a Test Script
      run: >
        source ~/.simple/.simplerc &&
        new testing-new --template test
    - name: Run the Test Script
      run: >
        source ~/.simple/.simplerc &&
        testing-new
    - name: Exit If Test Script Doesn't Work
      run: >
        source ~/.simple/.simplerc &&
        [[ $(testing-new) != 'simplescripts is working!' ]] 
        && exit 1
